{% extends 'home/base.html' %}
{% load static %}
{% block blog_css %}
<link rel="stylesheet" href="{% static 'front/css/blog.css' %}">
{% endblock %}
{% block about_us %}
{% endblock %}


{% block blog_view %}

  <div style="height: 250px;" ></div>
  <h2 class="text-center display-4">Blood Blog For Everyone</h2>
  <div class="container-fluid">
    <div class="row d-flex justify-content-center">
      <div class="col-md-9">
        {% if blog %}
        {% for item in blog %}
        <div class="list-group-item list-group-item-secondary mb-2">
          <h5>{{ item.blood_group }} needed</h5>
          <p class="lead">
            {{item.name}} need {{item.quantity}} beg {{item.blood_group}} before {{ item.time}}, {{item.date}}
          </p>
          {% if item.description %}
          <blockquote class="blockquote">
            <u>Message</u>
            <p class="mb-0">
                {{item.description}}
            </p>
          </blockquote>
          {%endif%}

          {% if comments %}
          {% for comment in comments %}
            {% if comment.blog.id == item.id %}
            
            <blockquote class="blockquote">
              <p class="mb-0">{{comment.text}}</p>
              <footer class="blockquote-footer"><cite title="Source Title">{{comment.user.username}}</cite></footer>
            </blockquote>
            
            {% endif %}
          {% endfor %}
          {% endif %}
          
          {% if request.user.is_authenticated %}
          <form method="POST" action="/blood/blog/comment/{{item.id}}/">
              {% csrf_token %}
              {{form.text}}
              <button type="submit" class="btn btn-sm btn-primary">Comment</button>
          </form>
          {% endif %}

        </div>
        {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>

{% endblock %}


<div class="pagination">
  {% if contacts.has_previous %}
  <a class="pagination-action" href="?page=1">
    <i class="fa fa-angle-double-left" aria-hidden="true"></i>
  </a>
  <a class="pagination-action" href="?page={{ contacts.previous_page_number }}">
    <i class="fa fa-angle-left" aria-hidden="true"></i>
  </a>
  {% endif %}
  {% for num in contacts.paginator.page_range %}

  {% if contacts.number == num %}
  <span>{{ num }}</span>
  {% elif num > contacts.number|add:'-3' and num < contacts.number|add:'3' %}
  <a href="?page={{ num }}">{{ num }}</a>
  {% endif %}

  {% endfor %}
  {% if contacts.has_next %}

  <a href="?page=1">first</a>
  <a href="?page={{ contacts.next_page_number }}">Previous</a>
  <a href="?page={{ contacts.paginator.num_pages }}">Last</a>
  {% endif %}
</div>
